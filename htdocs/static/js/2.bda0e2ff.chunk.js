webpackJsonp([2],{205:function(e,t,r){"use strict";r.d(t,"a",function(){return u});var n=r(0),i=(r.n(n),r(39)),a=r.n(i),s=function(e){return Object.keys(e).map(function(t){return e[t].source_url+" "+e[t].width+"w"})},u=function(e,t){if(!e)return!1;var r=void 0,n=void 0,i=void 0,u=void 0;e.source_url?(r=e.source_url,n=e.alt_text,u=e.media_details.sizes):(r=e.url,n=e.alt,i={width:e.width,height:e.height,file:e.filename,sizes:Object.keys(e.sizes).reduce(function(t,r){if(r.includes("-height")){var n=e.sizes[r];t[r.replace("-height","")].height=n}else if(r.includes("-width")){var i=e.sizes[r],a=r.replace("-width","");t[a].width=i}else t[r]={source_url:e.sizes[r]};return t},{})},u=i.sizes);var o=r.indexOf(".svg");t&&!o&&u[t]&&(r=u[t].source_url);var c=!o&&s(u);return r=a.a.WPURL+r,{srcset:c,source_url:r,alt_text:n}}},70:function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(i,a){try{var s=t[i](a),u=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function u(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),r.d(t,"default",function(){return g});var o=r(20),c=r.n(o),l=r(0),d=r.n(l),f=r(37),h=r(39),p=r.n(h),b=r(38),m=r(205),v=function(){function e(e,t){var r=[],n=!0,i=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(i)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),g=function(e){function t(e){a(this,t);var r=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=e.post;return r.state={slide:n,slides:[],parent:null,relations:{},animationDir:null,ready:!1},r}return u(t,e),w(t,[{key:"resetAnimationClasses",value:function(e){var t=["bounceOutUp","bounceOutDown","bounceOutLeft","bounceOutRight","bounceInUp","bounceInDown","bounceInLeft","bounceInRight"];if(e){var r;(r=e.classList).remove.apply(r,t)}}},{key:"animate",value:function(){function e(e){return t.apply(this,arguments)}var t=i(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.slide){e.next=3;break}return console.log("unable to animate as slide is not set",this.slide),e.abrupt("return",!1);case 3:return this.animationInProgress=!0,this.resetAnimationClasses(this.slide),this.slide.classList.add(t),e.next=8,new Promise(function(e){return setTimeout(e,300)});case 8:this.resetAnimationClasses(this.slide),this.animationInProgress=!1;case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"afterSwitch",value:function(){function e(){return t.apply(this,arguments)}var t=i(c.a.mark(function e(){var t,r,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=this.state,r=t.slide,n=t.animationDir,e.t0=n,e.next="left"===e.t0?4:"right"===e.t0?7:"up"===e.t0?10:"down"===e.t0?13:16;break;case 4:return e.next=6,this.animate("bounceInRight");case 6:return e.abrupt("break",16);case 7:return e.next=9,this.animate("bounceInLeft");case 9:return e.abrupt("break",16);case 10:return e.next=12,this.animate("bounceInDown");case 12:return e.abrupt("break",16);case 13:return e.next=15,this.animate("bounceInUp");case 15:return e.abrupt("break",16);case 16:if(!r){e.next=18;break}return e.abrupt("return",history.pushState({},r.title.rendered,r.link));case 18:case"end":return e.stop()}},e,this)}));return e}()},{key:"switchSlide",value:function(){function e(e){return t.apply(this,arguments)}var t=i(c.a.mark(function e(t){var r,n,i,a,s,u,o,l,d,f,h;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!this.animationInProgress){e.next=2;break}return e.abrupt("return");case 2:r=this.state,n=r.slide,i=r.slides,a=r.parent,s=r.relations,u=a?a.id:n.id,o=i.filter(function(e){return 0===e.parent}),l=o.findIndex(function(e){return e.id===u}),d=0===o.length?0:o.length-1,e.t0=t,e.next="forwards"===e.t0?10:"backwards"===e.t0?19:26;break;case 10:if(!(l<d)){e.next=18;break}return console.log(n),f=o[l+1],console.log(this.getSlideBackground),document.body.style.backgroundImage=this.getSlideBackground(0===n.featured_media?a:n).backgroundImage,e.next=17,this.animate("bounceOutLeft");case 17:this.setState({slide:f,parent:s[f.id]?f:null,animationDir:"left"},this.afterSwitch);case 18:return e.abrupt("break",26);case 19:if(!(l>0)){e.next=25;break}return h=o[l-1],document.body.style.backgroundImage=this.getSlideBackground(0===n.featured_media?a:n).backgroundImage,e.next=24,this.animate("bounceOutRight");case 24:this.setState({slide:h,parent:s[h.id]?h:null,animationDir:"right"},this.afterSwitch);case 25:return e.abrupt("break",26);case 26:case"end":return e.stop()}},e,this)}));return e}()},{key:"switchSubSlide",value:function(){function e(e){return t.apply(this,arguments)}var t=i(c.a.mark(function e(t){var r,n,i,a,s,u,o,l,d,f;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!this.animationInProgress){e.next=2;break}return e.abrupt("return",!1);case 2:if(r=this.state,n=r.slide,i=r.relations,a=r.parent,s=!!i[n.id],u=void 0,0!==n.parent||s){e.next=7;break}return e.abrupt("return",!1);case 7:if(!s){e.next=13;break}if("downwards"!==t){e.next=11;break}return this.setState({slide:i[n.id][0],animationDir:"down"},this.afterSwitch),e.abrupt("return");case 11:e.next=34;break;case 13:if(Object.entries(i).forEach(function(e){var t=v(e,2),r=t[0],n=t[1];console.log(r,a.id,n);var i=n.findIndex(function(e){return e.id===a.id});u=-1!==i&&i}),console.log(n),console.log(a),console.log(i),console.log(i[a.id]),o=i[a.id].findIndex(function(e){return e.id===n.id}),l=i[a.id][o+1],d=i[a.id][o-1],f="upwards"===t?0===o?a:d:l,console.log(o),console.log(l),console.log(d),!f){e.next=30;break}return document.body.style.backgroundImage=this.getSlideBackground(f).backgroundImage,e.next=29,this.animate("upwards"!==t?"bounceOutUp":"bounceOutDown");case 29:this.setState({slide:f,animationDir:"upwards"===t?"up":"down"},this.afterSwitch);case 30:if(a){e.next=34;break}return console.error("STOP WRITING BUGGY CODE!"),console.log("Or wait a bit."),e.abrupt("return");case 34:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleEvent",value:function(){function e(e){return t.apply(this,arguments)}var t=i(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next="keydown"===e.t0?3:15;break;case 3:e.t1=t.key,e.next="ArrowLeft"===e.t1?6:"ArrowRight"===e.t1?8:"ArrowUp"===e.t1?11:"ArrowDown"===e.t1?13:15;break;case 6:return this.switchSlide("backwards"),e.abrupt("break",15);case 8:return e.next=10,this.switchSlide("forwards");case 10:return e.abrupt("break",15);case 11:return this.switchSubSlide("upwards"),e.abrupt("break",15);case 13:return this.switchSubSlide("downwards"),e.abrupt("break",15);case 15:case"end":return e.stop()}},e,this)}));return e}()},{key:"componentDidMount",value:function(){function e(){return t.apply(this,arguments)}var t=i(c.a.mark(function e(){var t,r,i,a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return document.body.classList.add("fullscreen"),window.addEventListener("keydown",this),t=this.state.slide,e.next=5,b.b.getPostsFrom("slides",{perPage:100},{});case 5:r=e.sent,i=r.reduce(function(e,t){if(0!==t.parent){var r=t.parent;e[r]?e[r]=[].concat(n(e[r]),[t]).sort(function(e,t){return e.menu_order-t.menu_order}):e[r]=[t]}return e},{}),a=void 0,t&&0!==t.parent&&(a=r.find(function(e){return e.id===t.parent})),this.setState({slides:r,relations:i,parent:a,ready:!0});case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"componentWillReceiveProps",value:function(){function e(e){return t.apply(this,arguments)}var t=i(c.a.mark(function e(t){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("change",t),t.post&&this.setState({slide:t.post});case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"componentWillUnmount",value:function(){document.body.classList.remove("fullscreen"),window.removeEventListener("keydown",this)}},{key:"getSlideBackground",value:function(e){var t={backgroundImage:!1};if(!e)return t;var r=e._embedded,n=r?r["wp:featuredmedia"]:null;if(n){var i=n[0];if("rest_forbidden"===i.code)return t;var a=Object(m.a)(i,"medium");return console.log(a),{backgroundImage:"url('"+a.source_url+"')"}}return t}},{key:"renderSlide",value:function(e){var t=this;if(!e)return!1;var r=e.title,n=e.content;return d.a.createElement("article",{className:"single-slide animated",ref:function(e){return t.slide=e},style:this.getSlideBackground(e)},d.a.createElement("div",{className:"wrapper"},d.a.createElement("h1",null,r.rendered),n.rendered),d.a.createElement("a",{className:"edit",href:p.a.WPURL+"/wp-admin/post.php?post="+e.id+"&action=edit"},"Edit slide"))}},{key:"renderSlidePreview",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return d.a.createElement("div",{key:e.id,className:"slide-preview",style:this.getSlideBackground(e)},d.a.createElement(f.b,{to:e.link},"Open slide"),d.a.createElement("h2",null,e.title.rendered),!!r.length&&d.a.createElement("div",{className:"subslides"},r.map(function(e){return t.renderSlidePreview(e)})))}},{key:"renderAllSlidePreviews",value:function(){var e=this,t=this.state.slides.filter(function(e){return 0===e.parent}),r=this.state.slides.filter(function(e){return 0!==e.parent});return t.map(function(t){return e.renderSlidePreview(t,r.filter(function(e){return t.id===e.parent}))})}},{key:"render",value:function(){var e=this.state,t=e.slide;return e.ready?404===t?d.a.createElement("div",{className:"all-slides"},this.renderAllSlidePreviews()):this.renderSlide(t):d.a.createElement("p",null,"Any moment now...")}}]),t}(l.Component)}});
//# sourceMappingURL=2.bda0e2ff.chunk.js.map